<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 750" width="1000" height="750" font-family="'Segoe UI', system-ui, sans-serif">

  <defs>
    <marker id="arrow-blue" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#4a9eff"/>
    </marker>
    <marker id="arrow-green" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#22c55e"/>
    </marker>
    <marker id="arrow-red" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#f87171"/>
    </marker>
    <filter id="glow-green" x="-20%" y="-20%" width="140%" height="140%">
      <feGaussianBlur stdDeviation="3" result="coloredBlur"/>
      <feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1000" height="750" fill="#0d1117"/>

  <!-- Title -->
  <text x="500" y="40" fill="#e6e6e6" font-size="18" font-weight="600" text-anchor="middle" letter-spacing="0.5">Pi-hole Home Lab — Network Diagram</text>
  <line x1="100" y1="52" x2="900" y2="52" stroke="#1e2330" stroke-width="1"/>

  <!-- ===== LEGEND ===== -->
  <rect x="762" y="64" width="218" height="118" rx="6" fill="#111827" stroke="#1e2d40" stroke-width="1"/>
  <text x="782" y="84" fill="#6b7280" font-size="10" font-weight="700" letter-spacing="2">LEGEND</text>
  <line x1="782" y1="100" x2="822" y2="100" stroke="#4a9eff" stroke-width="2"/>
  <text x="832" y="104" fill="#9ca3af" font-size="11">Network connection</text>
  <line x1="782" y1="122" x2="822" y2="122" stroke="#4a9eff" stroke-width="1.5" stroke-dasharray="6,4"/>
  <text x="832" y="126" fill="#9ca3af" font-size="11">DNS query</text>
  <line x1="782" y1="144" x2="822" y2="144" stroke="#22c55e" stroke-width="1.5" stroke-dasharray="6,4"/>
  <text x="832" y="148" fill="#9ca3af" font-size="11">Allowed (forwarded)</text>
  <line x1="782" y1="166" x2="822" y2="166" stroke="#f87171" stroke-width="1.5" stroke-dasharray="6,4"/>
  <text x="832" y="170" fill="#9ca3af" font-size="11">Blocked (NXDOMAIN)</text>

  <!-- ===== INTERNET / CLOUD ===== -->
  <ellipse cx="440" cy="100" rx="52" ry="32" fill="#111827" stroke="#1e2d40" stroke-width="1.5"/>
  <ellipse cx="408" cy="112" rx="28" ry="22" fill="#111827" stroke="#1e2d40" stroke-width="1.5"/>
  <ellipse cx="472" cy="112" rx="28" ry="22" fill="#111827" stroke="#1e2d40" stroke-width="1.5"/>
  <rect x="382" y="108" width="116" height="22" fill="#111827"/>
  <path d="M415 95 Q440 80 465 95" fill="none" stroke="#4a9eff" stroke-width="1" opacity="0.4"/>
  <path d="M408 105 Q440 88 472 105" fill="none" stroke="#4a9eff" stroke-width="1" opacity="0.25"/>
  <text x="440" y="150" fill="#9ca3af" font-size="13" text-anchor="middle" font-weight="500">Internet</text>
  <text x="440" y="165" fill="#374151" font-size="10" text-anchor="middle">Upstream DNS: Quad9 (9.9.9.9, DNSSEC)</text>

  <!-- Internet to Router -->
  <line x1="440" y1="168" x2="440" y2="215" stroke="#4a9eff" stroke-width="2" marker-end="url(#arrow-blue)"/>

  <!-- ===== ROUTER ===== -->
  <rect x="328" y="218" width="224" height="98" rx="8" fill="#111827" stroke="#1e2d40" stroke-width="1.5"/>
  <rect x="352" y="238" width="96" height="46" rx="5" fill="#0d1117" stroke="#1a2236" stroke-width="1"/>
  <rect x="360" y="260" width="10" height="16" rx="1" fill="#1a2236"/>
  <rect x="374" y="260" width="10" height="16" rx="1" fill="#1a2236"/>
  <rect x="388" y="260" width="10" height="16" rx="1" fill="#1a2236"/>
  <rect x="402" y="260" width="10" height="16" rx="1" fill="#1a2236"/>
  <rect x="416" y="260" width="10" height="16" rx="1" fill="#1a2236"/>
  <circle cx="362" cy="246" r="3" fill="#22c55e" opacity="0.9"/>
  <circle cx="374" cy="246" r="3" fill="#22c55e" opacity="0.6"/>
  <circle cx="386" cy="246" r="3" fill="#4a9eff" opacity="0.7"/>
  <!-- wifi arcs -->
  <path d="M458 246 Q472 234 486 246" fill="none" stroke="#4a9eff" stroke-width="2" stroke-linecap="round"/>
  <path d="M463 253 Q472 245 481 253" fill="none" stroke="#4a9eff" stroke-width="1.5" stroke-linecap="round"/>
  <circle cx="472" cy="259" r="2.5" fill="#4a9eff"/>
  <text x="440" y="300" fill="#d1d5db" font-size="13" text-anchor="middle" font-weight="500">Router</text>
  <text x="440" y="316" fill="#374151" font-size="10" text-anchor="middle">192.168.0.1</text>

  <!-- Router to Switch -->
  <line x1="328" y1="258" x2="244" y2="258" stroke="#4a9eff" stroke-width="2" marker-end="url(#arrow-blue)"/>

  <!-- Router to Wifi Devices -->
  <line x1="552" y1="270" x2="638" y2="305" stroke="#4a9eff" stroke-width="2" marker-end="url(#arrow-blue)"/>

  <!-- ===== SWITCH ===== -->
  <rect x="84" y="218" width="156" height="78" rx="8" fill="#111827" stroke="#1e2d40" stroke-width="1.5"/>
  <rect x="100" y="236" width="124" height="28" rx="3" fill="#0d1117" stroke="#1a2236" stroke-width="1"/>
  <rect x="107" y="241" width="9" height="10" rx="1" fill="#1a2236"/>
  <rect x="120" y="241" width="9" height="10" rx="1" fill="#1a2236"/>
  <rect x="133" y="241" width="9" height="10" rx="1" fill="#1a2236"/>
  <rect x="146" y="241" width="9" height="10" rx="1" fill="#1a2236"/>
  <rect x="159" y="241" width="9" height="10" rx="1" fill="#1a2236"/>
  <rect x="172" y="241" width="9" height="10" rx="1" fill="#1a2236"/>
  <rect x="185" y="241" width="9" height="10" rx="1" fill="#1a2236"/>
  <rect x="198" y="241" width="9" height="10" rx="1" fill="#1a2236"/>
  <circle cx="109" cy="254" r="2" fill="#22c55e" opacity="0.9"/>
  <circle cx="122" cy="254" r="2" fill="#22c55e" opacity="0.7"/>
  <circle cx="135" cy="254" r="2" fill="#4a9eff" opacity="0.8"/>
  <circle cx="148" cy="254" r="2" fill="#22c55e" opacity="0.5"/>
  <circle cx="161" cy="254" r="2" fill="#374151"/>
  <circle cx="174" cy="254" r="2" fill="#22c55e" opacity="0.8"/>
  <circle cx="187" cy="254" r="2" fill="#374151"/>
  <circle cx="200" cy="254" r="2" fill="#4a9eff" opacity="0.6"/>
  <text x="162" y="282" fill="#d1d5db" font-size="13" text-anchor="middle" font-weight="500">Switch</text>

  <!-- Switch to Hyper-V Host -->
  <line x1="162" y1="296" x2="162" y2="358" stroke="#4a9eff" stroke-width="2" marker-end="url(#arrow-blue)"/>

  <!-- ===== HYPER-V HOST CONTAINER ===== -->
  <rect x="22" y="362" width="504" height="318" rx="10" fill="#080d18" stroke="#1e2d40" stroke-width="1.5" stroke-dasharray="8,4"/>
  <rect x="22" y="362" width="150" height="22" rx="5" fill="#1a2236"/>
  <text x="97" y="377" fill="#6b7280" font-size="10" font-weight="700" letter-spacing="1.5" text-anchor="middle">HYPER-V HOST</text>

  <!-- Windows host server box -->
  <rect x="42" y="396" width="148" height="208" rx="7" fill="#111827" stroke="#1e2d40" stroke-width="1.5"/>
  <rect x="56" y="416" width="120" height="16" rx="3" fill="#0d1117" stroke="#1a2236" stroke-width="1"/>
  <rect x="56" y="437" width="120" height="16" rx="3" fill="#0d1117" stroke="#1a2236" stroke-width="1"/>
  <rect x="56" y="458" width="120" height="16" rx="3" fill="#0d1117" stroke="#1a2236" stroke-width="1"/>
  <rect x="56" y="479" width="120" height="16" rx="3" fill="#0d1117" stroke="#1a2236" stroke-width="1"/>
  <rect x="56" y="504" width="55" height="44" rx="3" fill="#0d1117" stroke="#1a2236" stroke-width="1"/>
  <rect x="115" y="504" width="55" height="44" rx="3" fill="#0d1117" stroke="#1a2236" stroke-width="1"/>
  <circle cx="162" cy="424" r="3" fill="#22c55e" opacity="0.9"/>
  <circle cx="162" cy="445" r="3" fill="#4a9eff" opacity="0.8"/>
  <circle cx="162" cy="466" r="3" fill="#22c55e" opacity="0.6"/>
  <circle cx="162" cy="487" r="3" fill="#22c55e" opacity="0.8"/>
  <text x="116" y="568" fill="#d1d5db" font-size="12" text-anchor="middle" font-weight="500">Windows Host</text>
  <text x="116" y="584" fill="#374151" font-size="10" text-anchor="middle">192.168.0.100</text>

  <!-- Virtual Switch label -->
  <rect x="208" y="442" width="100" height="20" rx="4" fill="#1a2236"/>
  <text x="258" y="455" fill="#6b7280" font-size="10" text-anchor="middle" font-weight="600">Virtual Switch</text>
  <line x1="190" y1="452" x2="208" y2="452" stroke="#1e2d40" stroke-width="1.5"/>
  <line x1="308" y1="452" x2="348" y2="452" stroke="#1e2d40" stroke-width="1.5"/>

  <!-- Pi-hole VM box -->
  <rect x="348" y="395" width="158" height="252" rx="8" fill="#050f08" stroke="#22c55e" stroke-width="1.5" filter="url(#glow-green)"/>
  <rect x="348" y="395" width="158" height="22" rx="8" fill="#0c2214"/>
  <rect x="348" y="407" width="158" height="10" fill="#0c2214"/>
  <text x="427" y="411" fill="#22c55e" font-size="11" text-anchor="middle" font-weight="700" letter-spacing="1">Pi-hole VM</text>

  <!-- Server icon in Pi-hole box -->
  <rect x="372" y="430" width="110" height="80" rx="5" fill="#0d1117" stroke="#0f3319" stroke-width="1"/>
  <rect x="380" y="441" width="94" height="12" rx="2" fill="#0c2214" stroke="#0f3319" stroke-width="1"/>
  <rect x="380" y="458" width="94" height="12" rx="2" fill="#0c2214" stroke="#0f3319" stroke-width="1"/>
  <rect x="380" y="475" width="94" height="12" rx="2" fill="#0c2214" stroke="#0f3319" stroke-width="1"/>
  <circle cx="462" cy="447" r="3" fill="#22c55e" opacity="0.9"/>
  <circle cx="462" cy="464" r="3" fill="#22c55e" opacity="0.6"/>
  <circle cx="462" cy="481" r="3" fill="#f87171" opacity="0.7"/>

  <!-- Pi-hole labels -->
  <text x="427" y="533" fill="#4ade80" font-size="12" text-anchor="middle" font-weight="600">Pi-hole</text>
  <text x="427" y="550" fill="#374151" font-size="10" text-anchor="middle">Ubuntu Server</text>
  <text x="427" y="565" fill="#374151" font-size="10" text-anchor="middle">192.168.0.150</text>
  <text x="427" y="580" fill="#374151" font-size="10" text-anchor="middle">DNS Port: 53</text>

  <rect x="364" y="591" width="126" height="19" rx="4" fill="#0c2214" stroke="#0f3319" stroke-width="1"/>
  <text x="427" y="604" fill="#22c55e" font-size="10" text-anchor="middle">Blocklist active</text>

  <rect x="364" y="614" width="126" height="19" rx="4" fill="#0c2214" stroke="#0f3319" stroke-width="1"/>
  <text x="427" y="627" fill="#22c55e" font-size="10" text-anchor="middle">Web UI: :80/admin</text>

  <!-- Host to Pi-hole VM dashed arrow -->
  <line x1="190" y1="490" x2="348" y2="490" stroke="#22c55e" stroke-width="1.5" stroke-dasharray="5,3" marker-end="url(#arrow-green)"/>

  <!-- ===== NETWORK DEVICES ===== -->
  <rect x="638" y="298" width="340" height="382" rx="10" fill="#111827" stroke="#1e2d40" stroke-width="1.5"/>
  <rect x="638" y="298" width="168" height="22" rx="5" fill="#1a2236"/>
  <text x="722" y="313" fill="#6b7280" font-size="10" font-weight="700" letter-spacing="1.5" text-anchor="middle">NETWORK DEVICES</text>

  <!-- Phone -->
  <rect x="658" y="336" width="54" height="96" rx="9" fill="#0d1117" stroke="#1e2d40" stroke-width="1.5"/>
  <rect x="665" y="346" width="40" height="68" rx="3" fill="#111827"/>
  <circle cx="685" cy="425" r="5" fill="#1a2236"/>
  <rect x="673" y="342" width="24" height="3" rx="1.5" fill="#1a2236"/>
  <text x="685" y="448" fill="#9ca3af" font-size="10" text-anchor="middle">Phone</text>

  <!-- Tablet -->
  <rect x="730" y="330" width="76" height="108" rx="7" fill="#0d1117" stroke="#1e2d40" stroke-width="1.5"/>
  <rect x="738" y="340" width="60" height="80" rx="3" fill="#111827"/>
  <circle cx="768" cy="432" r="5" fill="#1a2236"/>
  <text x="768" y="454" fill="#9ca3af" font-size="10" text-anchor="middle">Tablet</text>

  <!-- Laptop -->
  <rect x="830" y="346" width="118" height="78" rx="5" fill="#0d1117" stroke="#1e2d40" stroke-width="1.5"/>
  <rect x="838" y="354" width="102" height="58" rx="3" fill="#111827"/>
  <rect x="822" y="424" width="134" height="9" rx="3" fill="#0d1117" stroke="#1e2d40" stroke-width="1"/>
  <rect x="862" y="427" width="54" height="3" rx="1.5" fill="#1a2236"/>
  <text x="889" y="449" fill="#9ca3af" font-size="10" text-anchor="middle">Laptop</text>

  <!-- Smart TV -->
  <rect x="658" y="476" width="138" height="82" rx="5" fill="#0d1117" stroke="#1e2d40" stroke-width="1.5"/>
  <rect x="666" y="484" width="122" height="62" rx="3" fill="#111827"/>
  <line x1="717" y1="558" x2="707" y2="572" stroke="#1e2d40" stroke-width="2"/>
  <line x1="737" y1="558" x2="747" y2="572" stroke="#1e2d40" stroke-width="2"/>
  <line x1="700" y1="572" x2="754" y2="572" stroke="#1e2d40" stroke-width="1.5"/>
  <text x="727" y="590" fill="#9ca3af" font-size="10" text-anchor="middle">Smart TV</text>

  <!-- Game Console -->
  <rect x="818" y="476" width="134" height="82" rx="8" fill="#0d1117" stroke="#1e2d40" stroke-width="1.5"/>
  <rect x="834" y="494" width="102" height="46" rx="4" fill="#111827"/>
  <circle cx="855" cy="517" r="9" fill="#1a2236"/>
  <circle cx="876" cy="506" r="7" fill="#1a2236"/>
  <circle cx="897" cy="517" r="7" fill="#1a2236"/>
  <circle cx="876" cy="528" r="7" fill="#1a2236"/>
  <circle cx="855" cy="517" r="4" fill="#0d1117"/>
  <text x="885" y="578" fill="#9ca3af" font-size="10" text-anchor="middle">Game Console</text>

  <!-- Mobile game note -->
  <rect x="658" y="610" width="294" height="50" rx="6" fill="#0d1117" stroke="#1e2d40" stroke-width="1"/>
  <text x="805" y="629" fill="#6b7280" font-size="10" text-anchor="middle">All devices DNS filtered by Pi-hole</text>
  <text x="805" y="648" fill="#4b5563" font-size="10" text-anchor="middle">No client software required</text>

  <!-- ===== DNS FLOW ARROWS ===== -->

  <!-- Windows Host DNS query to Pi-hole (short hop inside Hyper-V box) -->
  <path d="M116 396 L116 380 L348 380" fill="none" stroke="#4a9eff" stroke-width="1.5" stroke-dasharray="7,4" marker-end="url(#arrow-blue)"/>
  <text x="220" y="374" fill="#4a9eff" font-size="10" text-anchor="middle" font-weight="600">① DNS Query (Host)</text>

  <!-- 1. DNS Query: Devices to Pi-hole -->
  <path d="M638 410 C575 410 540 490 506 490" fill="none" stroke="#4a9eff" stroke-width="1.5" stroke-dasharray="7,4" marker-end="url(#arrow-blue)"/>
  <rect x="548" y="392" width="88" height="18" rx="3" fill="#0d1117" stroke="#1e2d40" stroke-width="1"/>
  <text x="592" y="404" fill="#4a9eff" font-size="10" text-anchor="middle" font-weight="600">① DNS Query</text>

  <!-- 2. Blocked response -->
  <path d="M506 514 C520 555 568 578 638 548" fill="none" stroke="#f87171" stroke-width="1.5" stroke-dasharray="7,4" marker-end="url(#arrow-red)"/>
  <rect x="528" y="558" width="116" height="18" rx="3" fill="#0d1117" stroke="#1e2d40" stroke-width="1"/>
  <text x="586" y="570" fill="#f87171" font-size="10" text-anchor="middle" font-weight="600">② Blocked (NXDOMAIN)</text>

  




  <!-- 3. Allowed upstream — routed left of router -->
  <path d="M427 395 L427 340 L55 340 L55 130 L382 130" fill="none" stroke="#22c55e" stroke-width="1.5" stroke-dasharray="7,4" marker-end="url(#arrow-green)"/>
  <rect x="18" y="172" width="122" height="18" rx="3" fill="#0d1117" stroke="#1e2d40" stroke-width="1"/>
  <text x="79" y="184" fill="#22c55e" font-size="10" text-anchor="middle" font-weight="600">③ Allowed → Upstream</text>

  <!-- ===== FOOTER ===== -->
  <rect x="22" y="696" width="956" height="40" rx="6" fill="#111827" stroke="#1e2d40" stroke-width="1"/>
  <text x="500" y="712" fill="#6b7280" font-size="10" text-anchor="middle" font-weight="700" letter-spacing="1">DNS FLOW</text>
  <text x="500" y="728" fill="#4b5563" font-size="11" text-anchor="middle">Device sends DNS query → Pi-hole checks blocklist → Blocked: returns NXDOMAIN · Allowed: forwarded to upstream DNS — Quad9 (9.9.9.9)</text>

</svg>
